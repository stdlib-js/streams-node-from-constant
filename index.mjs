// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-error@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-buffer@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-uint8array@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/buffer-from-arraybuffer@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/buffer-from-string@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/buffer-ctor@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-inherit@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-property@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-next-tick@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-number@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";function j(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})})),t}var v="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function y(){throw new Error("setTimeout has not been defined")}function w(){throw new Error("clearTimeout has not been defined")}var x=y,_=w;function T(e){if(x===setTimeout)return setTimeout(e,0);if((x===y||!x)&&setTimeout)return x=setTimeout,setTimeout(e,0);try{return x(e,0)}catch(t){try{return x.call(null,e,0)}catch(t){return x.call(this,e,0)}}}"function"==typeof v.setTimeout&&(x=setTimeout),"function"==typeof v.clearTimeout&&(_=clearTimeout);var M,E=[],O=!1,k=-1;function P(){O&&M&&(O=!1,M.length?E=M.concat(E):k=-1,E.length&&W())}function W(){if(!O){var e=T(P);O=!0;for(var t=E.length;t;){for(M=E,E=[];++k<t;)M&&M[k].run();k=-1,t=E.length}M=null,O=!1,function(e){if(_===clearTimeout)return clearTimeout(e);if((_===w||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(e);try{_(e)}catch(t){try{return _.call(null,e)}catch(t){return _.call(this,e)}}}(e)}}function q(e,t){this.fun=e,this.array=t}q.prototype.run=function(){this.fun.apply(null,this.array)};function D(){}var A=D,R=D,N=D,S=D,L=D,V=D,z=D;var B=v.performance||{},C=B.now||B.mozNow||B.msNow||B.oNow||B.webkitNow||function(){return(new Date).getTime()};var I=new Date;var J={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];E.push(new q(e,t)),1!==E.length||O||T(W)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:A,addListener:R,once:N,off:S,removeListener:L,removeAllListeners:V,emit:z,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*C.call(B),r=Math.floor(t),i=Math.floor(t%1*1e9);return e&&(r-=e[0],(i-=e[1])<0&&(r--,i+=1e9)),[r,i]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-I)/1e3}},F=require("stream");"disable"===J.env.READABLE_STREAM&&F?(module.exports=F,exports=module.exports=F.Readable,exports.Readable=F.Readable,exports.Writable=F.Writable,exports.Duplex=F.Duplex,exports.Transform=F.Transform,exports.PassThrough=F.PassThrough,exports.Stream=F):(exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=F||exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"));var U=j(Object.freeze({__proto__:null})),G={objectMode:!1,encoding:null,sep:"\n",iter:1e308},H=h,K=f,Q=c.isPrimitive,X=b.isPrimitive,Y=r.isPrimitive,Z=g.isPrimitive,$=d;var ee=function(e,t){return H(t)?K(t,"sep")&&(e.sep=t.sep,!Y(e.sep))?new TypeError($("invalid option. `%s` option must be a string. Option: `%s`.","sep",e.sep)):K(t,"objectMode")&&(e.objectMode=t.objectMode,!Q(e.objectMode))?new TypeError($("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):K(t,"encoding")&&(e.encoding=t.encoding,!Y(e.encoding)&&null!==e.encoding)?new TypeError($("invalid option. `%s` option must be a string or null. Option: `%s`.","encoding",e.encoding)):K(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!X(e.highWaterMark))?new TypeError($("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):K(t,"iter")&&(e.iter=t.iter,!Z(e.iter))?new TypeError($("invalid option. `%s` option must be a nonnegative integer. Option: `%s`.","iter",e.iter)):null:new TypeError($("invalid argument. Options argument must be an object. Value: `%s`.",t))};module.exports=void 0!==J&&"renderer"===J.type?require("./browser.js"):require("./node.js");var te=j(Object.freeze({__proto__:null}))("from-constant-stream"),re=U.Readable,ie=t,ne=r.isPrimitive,se=i,oe=n,ae=s,le=o,de=a,ue=l,me=d,pe=m,he=e,fe=p,ce=G,be=ee,ge=te;function je(e,t){var r,i;if(!(this instanceof je))return arguments.length>1?new je(e,t):new je(e);if(r=ue(ce),arguments.length>1&&(i=be(r,t)))throw i;if(!1===r.objectMode)if(ne(e))e=le(e);else if(se(e));else{if(!oe(e))throw new TypeError(me("invalid argument. In binary mode, a provided value must be a string, Buffer, or Uint8Array. Value: `%s`.",e));e=ae(e.buffer,e.byteOffset,e.length)}return ge("Creating a readable stream configured with the following options: %s.",JSON.stringify(r)),re.call(this,r),pe(this,"_destroyed",!1),he(this,"_objectMode",r.objectMode),he(this,"_sep",le(r.sep)),he(this,"_iter",r.iter),he(this,"_value",e),pe(this,"_i",0),this}u(je,re),he(je.prototype,"_read",(function(){var e;if(!this._destroyed)for(e=!0;e;){if(this._i+=1,this._i>this._iter)return ge("Finished iteration."),this.push(null);ge("Value: %s. Iter: %d.",this._value,this._i),e=!1===this._objectMode&&this._i>1?this.push(de.concat([this._sep,this._value])):this.push(this._value)}})),he(je.prototype,"destroy",(function(e){var t;return this._destroyed?(ge("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,fe((function(){e&&(ge("Stream was destroyed due to an error. Error: %s.",ie(e)?e.message:JSON.stringify(e)),t.emit("error",e));ge("Closing the stream..."),t.emit("close")})),this)}));var ve=h,ye=d,we=l,xe=je;var _e=f,Te=l,Me=je;var Ee=e,Oe=je,ke=function(e,t){var r;if(arguments.length>1){if(!ve(r=t))throw new TypeError(ye("invalid argument. Options argument must be an object. Value: `%s`.",r));r=we(t,1)}else r={};return r.objectMode=!0,new xe(e,r)},Pe=function(e,t){var r,i,n;return 0===(r=arguments.length)?(i={},n=!0):1===r?null!==e&&"object"==typeof e&&(_e(e,"sep")||_e(e,"iter")||_e(e,"objectMode")||_e(e,"encoding")||_e(e,"highWaterMark"))?(i=Te(e,1),n=!0):i={}:i=Te(t,1),n?s:o;function s(e){return new Me(e,i)}function o(){return new Me(e,i)}};Ee(Oe,"objectMode",ke),Ee(Oe,"factory",Pe);var We=Oe;export{We as default,Pe as factory,ke as objectMode};
//# sourceMappingURL=index.mjs.map
